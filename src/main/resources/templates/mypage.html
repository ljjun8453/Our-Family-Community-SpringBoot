<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout2}">

<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/mypage.css}"/>
</th:block>

<th:block layout:fragment="script">
    <script th:src="@{/js/mypage.js}" defer></script>
</th:block>

<div layout:fragment="content">
    <main>
        <section class="board-section">
            <div class="section-header">
                <h2>👤 마이페이지</h2>
            </div>

            <div class="post-list" style="padding: 20px;">
                <h3>회원 정보</h3><br>
                <p>이름: <span th:text="${member.name}">홍길동</span></p>
                <p>아이디: <span th:text="${member.userId}">jaejun</span></p>
                <p>이메일: <span th:text="${member.email}">user@email.com</span></p>
                <p>생년월일: <span th:text="${#temporals.format(member.birthday,'yyyy-MM-dd')}">2000-01-01</span></p>

                <hr style="margin: 20px 0;">

                <h3>🔑 비밀번호 변경</h3><br>
                <form method="POST" th:action="@{/mypage/change-password}" class="modal-content2">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <input id="current_password" type="password" name="currentPassword" placeholder="현재 비밀번호" required>
                    <div id="error_current" class="error-text"></div>

                    <input id="new_password" type="password" name="newPassword" placeholder="새 비밀번호" required>
                    <input id="confirm_password" type="password" name="confirmPassword" placeholder="새 비밀번호 확인" required>
                    <div id="error_confirm" class="error-text"></div>

                    <input type="submit" class="btn btn-mypage" value="비밀번호 변경">
                </form>

                <hr style="margin: 20px 0;">

                <h3>❌ 회원 탈퇴</h3><br>
<!--                <form method="POST" th:action="@{/mypage/delete}" class="modal-content2" onsubmit="return confirm('정말 탈퇴하시겠습니까? 😢');">-->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <input onclick="alert('아직 이용할 수 없습니다!')" type="submit" class="btn btn-signup" value="회원 탈퇴">
<!--                </form>-->

                <hr style="margin: 20px 0;">

                <h3>📝 내가 쓴 글</h3><br>
                <ul style="padding-left: 20px;" th:if="${!#lists.isEmpty(posts)}">
                    <li th:each="p: ${posts}">
                        <a th:href="@{/board/{boardType}/{postId}(boardType=${p.boardType}, postId=${p.id})}" th:text="${p.title}">제목</a>
                    </li>
                </ul>
                <p th:if="${#lists.isEmpty(posts)}">작성한 글이 없습니다.</p>
            </div>
        </section>
    </main>
</div>
</html>
